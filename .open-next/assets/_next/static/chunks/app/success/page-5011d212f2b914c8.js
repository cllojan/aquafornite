(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{3640:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var s=i(5155),r=i(5430),a=i(1976),o=i(6766),n=i(6874),l=i.n(n),c=i(2115);function d(){let{items:e,removeAll:t}=(0,r.N)(),{user:i,isLoaded:n}=(0,a.Jd)(),[d,u]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{n&&0!==e.length&&!d&&(async()=>{if(!i){console.log("⚠️ Usuario no registrado, no se guardar\xe1 historial."),t();return}try{let t=e.map(e=>e.discount),s={user_id:null==i?void 0:i.id,items:e.map(e=>({name:e.displayName,price:e.discount,image:e.displayAssets[0].url})),total:t.reduce((e,t)=>e+t,0)};console.log(s);let r=await fetch("/api/history",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(s)}),a=await r.json();console.log("Historial guardado",a)}catch(e){console.log("Error al guardar",e)}finally{t(),u(!0)}})()},[n,e,i,d]),(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,s.jsx)("div",{className:"mb-4 flex justify-center",children:(0,s.jsx)(o.default,{src:"/images/check_circle.png",alt:"check",width:100,height:100})}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Gracias!"}),(0,s.jsx)("p",{className:"text-gray-00 mb-8",children:"Tu compra fue exitosa "}),(0,s.jsx)(l(),{href:"/",children:(0,s.jsx)("button",{className:"btn btn-primary",children:"Volver a la inicio"})})]})})}},5430:(e,t,i)=>{"use strict";i.d(t,{N:()=>a});var s=i(5453),r=i(3125);let a=(0,s.v)((e,t)=>({items:[],addItem:i=>{if(t().items.find(e=>e.mainId===i.mainId))return r.P.error("\xa1Producto ya esta agregado al carrito !",{duration:3e3,position:"top-right",transition:"swingInverted",icon:"",sound:!0});e({items:[...t().items,i]}),r.P.success("\xa1Producto registrado con \xe9xito, gracias \uD83D\uDE18!",{duration:2500,position:"top-right",transition:"swingInverted",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-thumbs-up"><path d="M7 10v12"/><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"/></svg>',sound:!0})},removeItem:i=>{e({items:[...t().items.filter(e=>e.mainId!=i)]})},removeAll:()=>e({items:[]})}))},5715:(e,t,i)=>{Promise.resolve().then(i.bind(i,3640))}},e=>{var t=t=>e(e.s=t);e.O(0,[415,252,295,441,684,358],()=>t(5715)),_N_E=e.O()}]);